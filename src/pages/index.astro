---
import HeroLayout from '~/layouts/HeroLayout.astro';
import Features2 from '~/components/widgets/Features2.astro';
import Stats from '~/components/widgets/Stats.astro';
import BitcoinStats from '~/components/widgets/BitcoinStats.astro';
import MeetupEvents from '~/components/widgets/MeetupEvents.astro';
import Button from '~/components/ui/Button.astro';
import { Icon } from 'astro-icon/components';
import { communityReasons } from '~/data/reasons';
import BookClubPreview from '~/components/widgets/BookClubPreview.astro';
import { getCurrentBook } from '~/utils/bookclub';
import { createHero, HERO_IMAGES, HERO_OPACITY } from '~/utils/hero';

const metadata = {
  title: 'Bitcoin District',
  ignoreTitleTemplate: true,
};

// Hero configuration using utility function
const hero = createHero({
  image: HERO_IMAGES.index,
  alt: 'Bitcoin District Hero Background',
  opacity: HERO_OPACITY.light,
  title: 'This is <span class="text-[#f7931a]"> ₿itcoin </span> District',
  subtitle:
    '₿itcoin District is a community of Bitcoiners living and working in the DC, Maryland & Virginia (DMV) area. <span class="hidden sm:inline">We come together to network, socialize and learn from one another, all united over our belief in the power of Bitcoin, freedom and sovereignty.</span>',
});

// Get the current book for the book club section
const currentBook = getCurrentBook();
---

<HeroLayout metadata={metadata} hero={hero} contentBackground={{ type: 'transparent' }}>
  <!-- Bitcoin Live Stats Widget -->
  <div slot="hero-bottom" class="relative z-10 -mt-20 pb-12">
    <BitcoinStats class="px-4 sm:px-6" />
  </div>

  <!-- Upcoming Events Widget ********** -->

  <div slot="hero-bottom" class="sm:block">
    <MeetupEvents
      tagline="Get Involved"
      title="Upcoming Events"
      subtitle="Don't miss out on these upcoming Bitcoin District events"
      maxEvents={8}
      showCallToAction={false}
      showFilterTabs={false}
    />
</div>

<!-- View All Events Button ******** -->

<div class="max-w-6xl mx-auto px-4 sm:px-6 pb-8">
  <div class="text-center">
    <Button variant="secondary" text="View All Events" href="/events" class="inline-flex items-center gap-2">
      <Icon name="tabler:calendar" class="h-4 w-4" />
      View All Events
    </Button>
  </div>
</div>

<!-- Book Club Widget *************** -->

<BookClubPreview
  tagline="Study ₿itcoin"
  title="Join Our Monthly Book Club"
  subtitle="We get together every month to discuss a new book related to Bitcoin, money and economics. Everyone is welcome!"
  book={currentBook}
  actions={[
    {
      variant: 'primary',
      text: "See What We're Reading",
      href: '/bookclub',
      icon: 'tabler:book',
    },
  ]}
/>

<!-- Features Widget *************** -->

<Features2
  tagline="Community"
  title="Be part of a growing community"
  subtitle="Just a few good reasons to get involved with Bitcoin District"
  columns={3}
  items={communityReasons}
/>

<!-- Stats Widget ****************** -->

<Stats
  stats={[
    { title: 'Meetup Size', amount: '638' },
    { title: '⭐⭐⭐⭐⭐', amount: '183' },
    { title: 'Total ₿itcoin Forever', amount: '21M' },
  ]}
/>

</HeroLayout>